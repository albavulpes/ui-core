{"version":3,"sources":["services/app/HttpService.ts"],"names":[],"mappings":";AAAA,OAAO,EAAC,OAAO,EAAC,MAAM,QAAQ,CAAC;AAC/B,OAAO,KAA0C,MAAM,OAAO,CAAC;AAC/D,OAAO,IAAI,MAAM,0BAA0B,CAAC;AAC5C,OAAO,MAAM,MAAM,4BAA4B,CAAC;AAEhD,OAAO,EAAC,aAAa,EAAC,MAAM,iBAAiB,CAAC;AAW9C,IAAM,eAAe,GAAG;IACpB,IAAI,MAAA;IACJ,MAAM,QAAA;CACT,CAAC;AASF;IAKI,qBAAY,aAA4B;QACpC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,aAAa,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QAE/D,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC9B,CAAC;IAEO,wCAAkB,GAA1B;QACI,IAAM,IAAI,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,GAAG,GAAG,EAAS,CAAC;gCAEZ,YAAY;YACjB,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,EAAE,YAAY,EAAE;gBAC1C,GAAG;oBACC,OAAO,IAAK,eAAuB,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACrE,CAAC;aACJ,CAAC,CAAC;;QALP,KAAK,IAAI,YAAY,IAAI,eAAe;oBAA/B,YAAY;SAMpB;IACL,CAAC;IAtBQ,WAAW;QADvB,OAAO,EAAE;iDAMqB,aAAa;OAL/B,WAAW,CAuBvB;IAAD,kBAAC;CAvBD,AAuBC,IAAA;SAvBY,WAAW","file":"HttpService.js","sourcesContent":["import {Service} from 'typedi';\r\nimport axios, {AxiosInstance, AxiosRequestConfig} from 'axios';\r\nimport auth from '../../api/endpoints/auth';\r\nimport comics from '../../api/endpoints/comics';\r\n\r\nimport {ConfigService} from './ConfigService';\r\nimport {ApiEndpoint} from '../../api/ApiEndpoint';\r\n\r\nexport interface IHttpEndpoints {\r\n    [x: string]: ApiEndpoint;\r\n}\r\n\r\nexport interface IHttpOptions extends AxiosRequestConfig {\r\n    // endpoints: { [key: string]: ApiEndpoint }\r\n}\r\n\r\nconst __endpointDefns = {\r\n    auth,\r\n    comics\r\n};\r\n\r\ntype eDefns = typeof __endpointDefns;\r\n\r\ntype EndpointInstancesMap = {\r\n    [K in keyof eDefns]: InstanceType<eDefns[K]>;\r\n}\r\n\r\n@Service()\r\nexport class HttpService {\r\n    protected readonly _adapter: AxiosInstance;\r\n\r\n    api: EndpointInstancesMap;\r\n\r\n    constructor(ConfigService: ConfigService) {\r\n        this._adapter = axios.create(ConfigService.configuration.http);\r\n\r\n        this.configureEndpoints();\r\n    }\r\n\r\n    private configureEndpoints() {\r\n        const self = this;\r\n        self.api = {} as any;\r\n\r\n        for (let endpointName in __endpointDefns) {\r\n            Object.defineProperty(self.api, endpointName, {\r\n                get() {\r\n                    return new (__endpointDefns as any)[endpointName](self._adapter);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n"]}