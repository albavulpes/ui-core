{"version":3,"sources":["stores/auth/IdentityStore.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,EAAE,EAAC,OAAO,EAAC,MAAM,UAAU,CAAC;AACrC,OAAO,EAAC,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAC,MAAM,kCAAkC,CAAC;AAEpF,OAAO,EAAC,WAAW,EAAC,MAAM,iCAAiC,CAAC;AAC5D,OAAO,EAAC,YAAY,EAAC,MAAM,gCAAgC,CAAC;AAE5D;IAAmC,yCAAS;IAA5C;;IAqCA,CAAC;IAnBS,qCAAa,GAAnB;;;;;;;wBAE+B,WAAM,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,EAAA;;wBAA5C,cAAc,GAAG,SAA2B;wBAElD,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;;;;wBAGpC,IAAI,OAAK,CAAC,QAAQ,IAAI,OAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,GAAG,EAAE;4BACjD,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAK,CAAC,OAAO,CAAC,CAAC;yBAC1C;;;;;;KAER;IAGO,sCAAc,GAAtB,UAAuB,QAAwB;QAC3C,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;QAClC,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;QAC5B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;IAChC,CAAC;IAjCD;QADC,OAAO,EAAE;0CACG,WAAW;sDAAC;IAGzB;QADC,OAAO,EAAE;0CACI,YAAY;uDAAC;IAG3B;QADC,KAAK,EAAE;;0DACiB;IAGzB;QADC,KAAK,EAAE;;mDACS;IAGjB;QADC,KAAK,EAAE;;gDACM;IAGd;QADC,MAAM,EAAE;;;;sDAYR;IAGD;QADC,QAAQ,EAAE;;;;uDAKV;IACL,oBAAC;CArCD,AAqCC,CArCkC,SAAS,GAqC3C;SArCY,aAAa;AAuC1B,EAAE,CAAC,OAAO,CAAC,eAAe,EAAE,aAAa,CAAC,CAAC","file":"IdentityStore.js","sourcesContent":["import di, {Require} from '../../di';\r\nimport {Action, Mutation, State, VuexStore} from '../../framework/decorators/Store';\r\n\r\nimport {AuthService} from '../../services/auth/AuthService';\r\nimport {ToastService} from '../../services/ui/ToastService';\r\n\r\nexport class IdentityStore extends VuexStore {\r\n\r\n    @Require()\r\n    AuthService: AuthService;\r\n\r\n    @Require()\r\n    ToastService: ToastService;\r\n\r\n    @State()\r\n    IsAuthenticated: boolean;\r\n\r\n    @State()\r\n    UserName: string;\r\n\r\n    @State()\r\n    Email: string;\r\n\r\n    @Action()\r\n    async fetchIdentity() {\r\n        try {\r\n            const statusResponse = await this.AuthService.me();\r\n\r\n            this.updateIdentity(statusResponse);\r\n        }\r\n        catch (error) {\r\n            if (error.response && error.response.status !== 401) {\r\n                this.ToastService.error(error.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    @Mutation()\r\n    private updateIdentity(identity: StatusResponse) {\r\n        this.UserName = identity.UserName;\r\n        this.Email = identity.Email;\r\n        this.IsAuthenticated = true;\r\n    }\r\n}\r\n\r\ndi.service('IdentityStore', IdentityStore);\r\n"]}